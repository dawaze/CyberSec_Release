<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberSec | Cryptography Tools</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        .crypto-container { max-width: 800px; margin: 40px auto; padding: 0 20px; }
        .crypto-card { background: rgba(255, 255, 255, 0.04); border: 1px solid rgba(61, 220, 151, 0.25); border-radius: 14px; padding: 40px; box-shadow: 0 0 40px rgba(0, 0, 0, 0.6); }
        .crypto-header { text-align: center; margin-bottom: 30px; }
        .crypto-title { font-size: 32px; color: #3ddc97; margin-bottom: 10px; }
        .crypto-subtitle { font-size: 16px; opacity: 0.8; }
        .crypto-form { display: flex; flex-direction: column; gap: 20px; max-width: 600px; margin: 0 auto; }
        
        .field { margin-bottom: 20px; }
        .field label { display: block; margin-bottom: 8px; font-size: 14px; opacity: 0.9; }
        .field select, .field input { width: 100%; padding: 12px 16px; font-size: 16px; background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(61, 220, 151, 0.4); border-radius: 8px; color: #e6f1ff; }
        .field input:focus, .field select:focus { border-color: #3ddc97; box-shadow: 0 0 10px rgba(61, 220, 151, 0.3); outline: none; }
        .submit-btn { padding: 14px; font-size: 18px; font-weight: bold; background: #3ddc97; color: #000; border: none; border-radius: 8px; cursor: pointer; transition: 0.3s; }
        .submit-btn:hover { background: #2bbd7e; transform: translateY(-2px); }
        #result-box { margin-top: 30px; background: #0a0f12; border: 1px solid #3ddc97; border-radius: 10px; padding: 20px; font-family: 'Courier New', monospace; color: #00ff9d; white-space: pre-wrap; word-wrap: break-word; min-height: 150px; display: none; }
        .error { color: #ff6b6b; margin-top: 10px; text-align: center; }
        #key-field { display: none; }
        .hint { font-size: 13px; opacity: 0.7; margin-top: 5px; }
    </style>
</head>
<body>

    <header class="navbar">
        <a href="{{ url_for('index') }}" class="logo">CYBERSEC</a>
        <div class="nav-buttons">
            <span style="margin-right: 20px; opacity: 0.9; color: #3ddc97;">
                {{ current_user.login }}
            </span>
            <a href="{{ url_for('logout') }}" class="btn btn-outline">Logout</a>
        </div>
    </header>

    <div class="crypto-container">
        <div class="crypto-card">
            <div class="crypto-header">
                <h1 class="crypto-title">Cryptography Tools</h1>
                <p class="crypto-subtitle">Encrypt, decrypt, hash and compare data</p>
            </div>

            <form class="crypto-form" method="POST">
                {{ form.hidden_tag() }}

                <div class="field">
                    {{ form.cipher_type.label }}
                    {{ form.cipher_type(class="crypto-select", id="cipher-type") }}
                </div>

                <div class="field" id="operation-field">
                    {{ form.operation.label }}
                    {{ form.operation(class="crypto-select", id="operation-select") }}
                </div>

                <div class="field">
                    {{ form.text.label }}
                    {{ form.text(class="crypto-input", placeholder="Enter text here...") }}
                </div>

                <div class="field" id="key-field">
                    {{ form.key.label }}
                    {{ form.key(class="crypto-input", placeholder="Enter key / shift here...") }}
                    <div class="hint" id="key-hint"></div>
                </div>

                <div class="field">
                    {{ form.submit(class="submit-btn") }}
                </div>
            </form>

            {% if result is not none %}
                <div id="result-box" style="display: block;">
                    <strong>Result:</strong>
                    <pre>{{ result }}</pre>
                </div>
            {% endif %}

            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <p class="error">{{ message }}</p>
                    {% endfor %}
                {% endif %}
            {% endwith %}
        </div>
    </div>

    <footer class="footer">
        <p>© 2026 CyberSec — Platform for learning and cybersecurity analysis</p>
    </footer>

    <script>
    const cipherSelect = document.getElementById('cipher-type');
    const operationSelect = document.getElementById('operation-select');
    const operationField = document.getElementById('operation-field');
    const keyField = document.getElementById('key-field');
    const keyHint = document.getElementById('key-hint');

    function updateForm() {
        const cipher = cipherSelect.value;
        const isHash = ['sha256', 'sha512', 'md5'].includes(cipher);
        const needsKey = ['vigenere', 'aes', 'caesar'].includes(cipher);

        operationField.style.display = isHash ? 'none' : 'block';
        
        keyField.style.display = needsKey ? 'block' : 'none';

        if (isHash) {
            operationSelect.value = 'hash';
            keyHint.textContent = '';
        } else {
            if (cipher === 'caesar') {
                keyHint.textContent = 'For Caesar: enter shift number (example: 3)';
            } else if (cipher === 'vigenere') {
                keyHint.textContent = 'For Vigenère: enter keyword (example: KEY)';
            } else if (cipher === 'aes') {
                keyHint.textContent = 'For AES: enter any password';
            } else {
                keyHint.textContent = '';
            }
        }
    }

    cipherSelect.addEventListener('change', updateForm);
    updateForm();
</script>

</body>
</html>